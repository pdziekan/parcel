\begin{Verbatim}[commandchars=\\\{\}]
\PY{c+cSingleline}{;listing00}
\PY{k}{pro} test 
\PY{c+cSingleline}{  ; specifying parameters}
  gstdev \PY{o}{=} \PY{l+m+mf}{1.5}
  outfile \PY{o}{=} \PY{l+s+s1}{\PYZsq{}idltest.nc\PYZsq{}}

\PY{c+cSingleline}{  ; executing the simulation}
  \PY{n+nb}{spawn}, [ \PYZdl{}
    \PY{l+s+s1}{\PYZsq{}python\PYZsq{}}, \PY{l+s+s1}{\PYZsq{}parcel.py\PYZsq{}}, \PY{l+s+s1}{\PYZsq{}\PYZhy{}\PYZhy{}outfile\PYZsq{}}, outfile, \PY{l+s+s1}{\PYZsq{}\PYZhy{}\PYZhy{}gstdev\PYZsq{}}, \PY{n+nb}{string}(gstdev) \PYZdl{}
  ], \PY{o}{/}noshell

\PY{c+cSingleline}{  ; opening the output file}
  nc \PY{o}{=} ncdf\PYZus{}open(outfile, \PY{o}{/}nowrite)

\PY{c+cSingleline}{  ; plotting initial and final wet spectra}
  ncdf\PYZus{}diminq, nc, ncdf\PYZus{}dimid(nc, \PY{l+s+s1}{\PYZsq{}radii\PYZsq{}}), ignore, nr
  ncdf\PYZus{}diminq, nc, ncdf\PYZus{}dimid(nc, \PY{l+s+s1}{\PYZsq{}t\PYZsq{}}    ), ignore, nt

  !P.\PY{n+nb}{MULTI}\PY{o}{=}[\PY{l+m+mi}{0},\PY{l+m+mi}{2},\PY{l+m+mi}{1}]
  ncdf\PYZus{}varget, nc, \PY{l+s+s1}{\PYZsq{}radii\PYZus{}dr\PYZsq{}}, radii\PYZus{}dr
  ncdf\PYZus{}varget, nc, \PY{l+s+s1}{\PYZsq{}radii\PYZus{}rl\PYZsq{}}, radii\PYZus{}rl
 
  \PY{k}{foreach} it, [\PY{l+m+mi}{0}, nt\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}] \PY{k}{do} \PY{k}{begin}
    ncdf\PYZus{}varget, nc, \PY{l+s+s1}{\PYZsq{}radii\PYZus{}m0\PYZsq{}}, radii\PYZus{}m0, count\PY{o}{=}[nr, \PY{l+m+mi}{1}], offset\PY{o}{=}[\PY{l+m+mi}{0}, it]
    \PY{n+nb}{plot},                                \PYZdl{}
      xtitle\PY{o}{=}\PY{l+s+s1}{\PYZsq{}particle wet radius [um]\PYZsq{}}, \PYZdl{}
      ytitle\PY{o}{=}\PY{l+s+s1}{\PYZsq{}[mg\PYZhy{}1 um\PYZhy{}1]\PYZsq{}},              \PYZdl{}
      psym\PY{o}{=}\PY{l+m+mi}{10}, \PY{o}{/}xlog, \PY{o}{/}ylog,             \PYZdl{}
      (radii\PYZus{}rl\PY{o}{+}radii\PYZus{}dr\PY{o}{/}\PY{l+m+mi}{2})\PY{o}{*}1e6, (radii\PYZus{}m0\PY{o}{/}1e3)\PY{o}{/}(radii\PYZus{}dr\PY{o}{*}1e6)
  \PY{k}{endforeach}
\PY{k}{end}
\PY{c+cSingleline}{;listing01}
\end{Verbatim}
